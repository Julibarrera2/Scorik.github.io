<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Creator</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Alpine.js -->
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.2/dist/cdn.min.js" defer></script>

    <!-- OpenSheetMusicDisplay -->
    <script src="https://cdn.jsdelivr.net/npm/opensheetmusicdisplay@1.8.0/build/opensheetmusicdisplay.min.js"></script>

    <style>
        body {
            background: #ffffff;
            overflow-x: hidden;
            font-family: Arial, sans-serif;
        }

        /* TOP BAR */
        .topbar {
            width: 100%;
            height: 70px;
            background: #B573FF;
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 0;
            z-index: 20;
        }

        .hamburger {
            position: absolute;
            left: 20px;
            top: 12px;
            background: #8B35FF;
            border-radius: 8px;
            padding: 8px 12px;
            cursor: pointer;
        }

        .hamburger div {
            width: 28px;
            height: 4px;
            background: white;
            margin: 4px 0;
            border-radius: 5px;
        }

        .title {
            font-size: 28px;
            color: white;
            font-weight: bold;
        }

        /* Sidebar */
    .sidebar {
        position: fixed;
        top: 0;
        left: 0;
        width: 250px;
        height: 100%;
        background-color: #814ac495; /* Morado claro */
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 80px;
        box-sizing: border-box;
    }
    .sidebar.open {
        transform: translateX(0);
    }

    .menu {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex-grow: 1;
    }

    .menu-button {
        background-color: #ffffff;
        color: #8300F6;
        font-weight: bold;
        border: none;
        border-radius: 20px;
        padding: 10px 20px;
        margin: 15px 0;
        width: 170px;
        cursor: pointer;
        font-size: 16px;
        text-align: center;
    }
    .menu-button:hover {
        background-color: #e0d7f8;
    }

    .bottom-area {
        margin-top: auto;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    .bottom-icon {
        margin-bottom: 20px;
        cursor: pointer;
    }

        /* LEFT TOOLBAR */
        .tool-column {
            position: fixed;
            top: 80px;
            left: 10px;
            width: 100px;
            background: #b370ff;
            border-radius: 15px;
            padding: 10px;
            z-index: 10;
        }

        .tool-btn {
            width: 55px;
            height: 55px;
            background: white;
            border-radius: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            border: 2px solid #b370ff;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tool-btn img {
            width: 40px;
            height: 40px;
            object-fit: contain;
        }

        .btn-success {
            background-color: #1fc3d2;
            border-color: #6B2BD9;
        }

        /* RIGHT PANEL (NOTAS, CLAVES, ETC.) */
        .right-panel {
            position: fixed;
            right: 0;
            top: 80px;
            width: 260px;
            background: #B573FF;
            padding: 15px;
            border-radius: 15px 0 0 15px;
            color: white;
            max-height: calc(100vh - 100px);
            overflow-y: auto;
            z-index: 10;
        }

        .panel-block {
            background: #8B35FF;
            padding: 10px;
            border-radius: 10px;
            margin-bottom: 15px;
            cursor: pointer;
        }

        .panel-content {
            background: white;
            border-radius: 10px;
            padding: 8px;
            margin-top: 8px;
            display: none;
        }

        .panel-content.open {
            display: block;
        }

        .panel-content img {
            width: 50px;
            height: 50px;
            object-fit: contain;
            cursor: grab;
            margin: 4px auto;
            display: block;
        }

        /* ZONA DE PARTITURA */
        .canvas-area {
            margin-top: 100px;
            margin-left: 110px;
            margin-right: 300px;
            height: calc(100vh - 120px);
            overflow: auto;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            background: #f5f5f5;
        }

        #staffCanvas {
            background: white;
            border-radius: 10px;
            min-width: 700px;
            max-width: 900px;
            margin: 0 auto;
            padding: 10px 0;
        }

        /* ÍCONO QUE SIGUE AL MOUSE CUANDO ARRASTRÁS */
        .draggable {
            position: fixed;
            width: 40px;
            height: 40px;
            pointer-events: none;
            z-index: 2000;
            transform: translate(-50%, -50%);
        }
    </style>

</head>
<body x-data="creatorApp()" x-init="init()">

    <!-- Sidebar -->
<div :class="{ 'sidebar': true, 'open': sidebarOpen }">
    <div class="menu">
        <button class="menu-button" onclick="location.href='mp3tomusic.html'">mp3 to music sheet</button>
        <button class="menu-button" onclick="location.href='library.html'">Library</button>
        <button class="menu-button" onclick="location.href='create.html'">Create</button>
        <button class="menu-button" onclick="location.href='User.html'">User</button>
    </div>
    <div class="bottom-area">
        <div class="bottom-icon" @click="sidebarOpen = false">
            <svg xmlns="http://www.w3.org/2000/svg" fill="white" viewBox="0 0 24 24" width="40" height="40">
                <path d="M18 6L6 18M6 6l12 12" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </div>
    </div>
</div>


    <!-- TOPBAR -->
    <div class="topbar">
        <div class="hamburger" @click="sidebarOpen=!sidebarOpen">
            <div></div><div></div><div></div>
        </div>
        <div class="title">Creator</div>
    </div>

    <!-- LEFT TOOLBAR -->
    <div class="tool-column">
        <div class="tool-btn" @click="togglePanel('notas')">
            <img src="Img/negra.png">
        </div>
        <div class="tool-btn" @click="togglePanel('silencios')">
            <img src="Img/silencio negra.png">
        </div>
        <div class="tool-btn" @click="togglePanel('claves')">
            <img src="Img/clave_de_sol.png">
        </div>
        <div class="tool-btn" @click="togglePanel('dinamica')">
            <img src="Img/forte.png">
        </div>
        <div class="tool-btn" @click="togglePanel('armadura')">
            <img src="Img/fusa.png">
        </div>
        <div class="tool-btn" @click="togglePanel('compas')">
            <img src="Img/corchea.png">
        </div>

        <button class="btn btn-success w-100 mt-2" @click="init()">Create</button>
    </div>

    <!-- RIGHT PANEL -->
    <div class="right-panel">

        <!-- NOTAS -->
        <div class="panel-block" @click="panel.notas=!panel.notas">
            Notas
            <div class="panel-content" :class="{ 'open': panel.notas }">
                <img src="Img/redonda.png"  data-kind="note" data-step="C" data-octave="4" data-duration="whole"   @mousedown="startDrag($event)">
                <img src="Img/blanca.png"   data-kind="note" data-step="C" data-octave="4" data-duration="half"    @mousedown="startDrag($event)">
                <img src="Img/negra.png"    data-kind="note" data-step="C" data-octave="4" data-duration="quarter" @mousedown="startDrag($event)">
                <img src="Img/corchea.png"  data-kind="note" data-step="C" data-octave="4" data-duration="eighth"  @mousedown="startDrag($event)">
            </div>
        </div>

        <!-- SILENCIOS -->
        <div class="panel-block" @click="panel.silencios=!panel.silencios">
            Silencios
            <div class="panel-content" :class="{ 'open': panel.silencios }">
                <img src="Img/silencio redonda.png" data-kind="rest" data-duration="whole"   @mousedown="startDrag($event)">
                <img src="Img/silencio blanca.png"  data-kind="rest" data-duration="half"    @mousedown="startDrag($event)">
                <img src="Img/silencio negra.png"   data-kind="rest" data-duration="quarter" @mousedown="startDrag($event)">
            </div>
        </div>

        <!-- CLAVES -->
        <div class="panel-block" @click="panel.claves=!panel.claves">
            Claves
            <div class="panel-content" :class="{ 'open': panel.claves }">
                <img src="Img/clave_de_sol.png" data-kind="clef" data-sign="G" data-line="2" @mousedown="startDrag($event)">
                <img src="Img/clave_de_fa.png"  data-kind="clef" data-sign="F" data-line="4" @mousedown="startDrag($event)">
                <img src="Img/clave_de_do.png"  data-kind="clef" data-sign="C" data-line="3" @mousedown="startDrag($event)">
            </div>
        </div>

        <!-- DINÁMICA -->
        <div class="panel-block" @click="panel.dinamica=!panel.dinamica">
            Dinámica
            <div class="panel-content" :class="{ 'open': panel.dinamica }">
                <img src="Img/metzoforte.png" data-kind="dynamic" data-text="mf" @mousedown="startDrag($event)">
                <img src="Img/forte.png"      data-kind="dynamic" data-text="f"  @mousedown="startDrag($event)">
                <img src="Img/piano.png"      data-kind="dynamic" data-text="p"  @mousedown="startDrag($event)">
            </div>
        </div>

        <!-- ARMADURA -->
        <div class="panel-block" @click="panel.armadura=!panel.armadura">
            Armadura
            <div class="panel-content" :class="{ 'open': panel.armadura }">
                <img src="Img/image 69 (1).png" data-kind="key" data-fifths="0" @mousedown="startDrag($event)">
            </div>
        </div>

        <!-- COMPÁS -->
        <div class="panel-block" @click="panel.compas=!panel.compas">
            Ind. de Compás
            <div class="panel-content" :class="{ 'open': panel.compas }">
                <img src="Img/image 71 (1).png" data-kind="time" data-beats="4" data-beat-type="4" @mousedown="startDrag($event)">
            </div>
        </div>

        <!-- BORRAR -->
    <div class="panel-block" @click="panel.borrar=!panel.borrar">
        Borrar
        <div class="panel-content" :class="{ 'open': panel.borrar }">
            <!-- Cambiá Img/eraser.png por el icono que tengas -->
            <img src="Img/eraser.png" data-kind="erase" @mousedown="startDrag($event)">
        </div>
    </div>

        <button class="btn btn-success w-100 mt-2" @click="saveCanvas()">Save</button>
    </div>

    <!-- MAIN CANVAS -->
    <div class="canvas-area">
        <div id="staffCanvas"></div>
    </div>

<script>
function creatorApp() {
    return {
        sidebarOpen: false,

        panel: {
            notas: false,
            silencios: false,
            claves: false,
            dinamica: false,
            armadura: false,
            compas: false,
            borrar: false
        },

        dragging: null,
        xmlDoc: null,
        osmd: null,

        moveHandler: null,
        upHandler: null,

        // CREA HOJA DE PARTITURA CON VARIOS SISTEMAS
        async init() {
            const baseXml = `<?xml version="1.0" encoding="UTF-8"?>
<score-partwise version="3.1">
<part-list>
    <score-part id="P1">
    <part-name></part-name>
    </score-part>
</part-list>
<part id="P1">

    <!-- SISTEMA 1 -->
    <measure number="1">
    <print new-system="yes">
        <system-layout>
        <system-distance>90</system-distance>
        </system-layout>
    </print>
    <attributes>
        <divisions>4</divisions>
        <key><fifths>0</fifths></key>
        <time><beats>4</beats><beat-type>4</beat-type></time>
        <clef><sign>G</sign><line>2</line></clef>
    </attributes>
    <note><rest/><duration>16</duration><voice>1</voice><type>whole</type></note>
    </measure>

    <!-- SISTEMA 2 -->
    <measure number="2">
    <print new-system="yes">
        <system-layout>
        <system-distance>90</system-distance>
        </system-layout>
</part>
</score-partwise>`;

            const parser = new DOMParser();
            this.xmlDoc = parser.parseFromString(baseXml, "application/xml");

            if (!this.osmd) {
                this.osmd = new opensheetmusicdisplay.OpenSheetMusicDisplay("staffCanvas", {
                    drawTitle: false,
                    drawPartNames: false,
                    drawPartAbbreviations: false
                });
                this.osmd.Zoom = 0.9;
            }

            const serializer = new XMLSerializer();
            const xmlString = serializer.serializeToString(this.xmlDoc);
            await this.osmd.load(xmlString);
            this.osmd.render();
        },

        togglePanel(name) {
            this.panel[name] = !this.panel[name];
        },

        // Inicia el drag y crea el ícono fantasma
        startDrag(event) {
            const img = event.target;
            const dataset = img.dataset;

            this.dragging = {
                kind: dataset.kind,
                step: dataset.step,
                octave: dataset.octave,
                duration: dataset.duration,
                sign: dataset.sign,
                line: dataset.line,
                beats: dataset.beats,
                beatType: dataset.beatType,
                fifths: dataset.fifths,
                text: dataset.text,
                ghost: null
            };

            const ghost = img.cloneNode(true);
            ghost.classList.add("draggable");
            ghost.style.left = event.clientX + "px";
            ghost.style.top  = event.clientY + "px";
            document.body.appendChild(ghost);
            this.dragging.ghost = ghost;

            this.moveHandler = (e) => {
                if (this.dragging && this.dragging.ghost) {
                    this.dragging.ghost.style.left = e.clientX + "px";
                    this.dragging.ghost.style.top  = e.clientY + "px";
                }
            };

            this.upHandler = async (e) => {
            document.removeEventListener("mousemove", this.moveHandler);
            document.removeEventListener("mouseup", this.upHandler);

            if (this.dragging && this.dragging.ghost) {
                this.dragging.ghost.remove();
            }

            if (!this.dragging || !this.xmlDoc) {
                this.dragging = null;
                return;
            }

            // acá usamos el SVG del pentagrama, no el div blanco
            const svgEl = document.querySelector("#staffCanvas svg");
            if (!svgEl) {
                this.dragging = null;
                return;
            }

            const rect = svgEl.getBoundingClientRect();
            const x = e.clientX;
            const y = e.clientY;

            const inside =
                x >= rect.left && x <= rect.right &&
                y >= rect.top && y <= rect.bottom;

            if (inside) {
                this.applySymbolToXml(this.dragging, rect, x, y);

                const serializer = new XMLSerializer();
                const xmlString = serializer.serializeToString(this.xmlDoc);
                await this.osmd.load(xmlString);
                this.osmd.render();
            }

            this.dragging = null;
        };

            document.addEventListener("mousemove", this.moveHandler);
            document.addEventListener("mouseup", this.upHandler);
        },

        // decide compás y altura a partir de x,y
        applySymbolToXml(symbol, rect, clientX, clientY) {
            if (!symbol.kind) return;

            // X → qué compás
            const relX = clientX - rect.left;
            const relY = clientY - rect.top;

            const measures = this.xmlDoc.querySelectorAll('part[id="P1"] > measure');
            if (!measures.length) return;

            let measureIndex = Math.floor(relX / rect.width * measures.length);
            if (measureIndex < 0) measureIndex = 0;
            if (measureIndex >= measures.length) measureIndex = measures.length - 1;

            const measure = measures[measureIndex];

            // Mapeo de alturas de grave (abajo) a agudo (arriba)
            const pitchMap = [
                { step: 'E', octave: 4 }, // línea 1
                { step: 'F', octave: 4 },
                { step: 'G', octave: 4 },
                { step: 'A', octave: 4 },
                { step: 'B', octave: 4 },
                { step: 'C', octave: 5 },
                { step: 'D', octave: 5 },
                { step: 'E', octave: 5 },
                { step: 'F', octave: 5 },
                { step: 'G', octave: 5 }  // parte más arriba
            ];

            // Usamos la franja central del SVG (evitando blanco)
            const topLimit    = rect.height * 0.25;
            const bottomLimit = rect.height * 0.75;
            let y = relY;

            if (y < topLimit) y = topLimit;
            if (y > bottomLimit) y = bottomLimit;

            const usableHeight = bottomLimit - topLimit;
            const t = (y - topLimit) / usableHeight; // 0 = arriba, 1 = abajo

            // Invertimos: mover el mouse hacia ARRIBA → nota más aguda
            let pitchIndex = Math.round((1 - t) * (pitchMap.length - 1));
            if (pitchIndex < 0) pitchIndex = 0;
            if (pitchIndex >= pitchMap.length) pitchIndex = pitchMap.length - 1;

            const mappedPitch = pitchMap[pitchIndex];

            if (symbol.kind === "note") {
            const step   = mappedPitch.step;
            const octave = mappedPitch.octave;
            const dur    = symbol.duration || "quarter";
            this.addNoteToXml(measure, step, octave, dur);

            } else if (symbol.kind === "rest") {
                const dur = symbol.duration || "quarter";
                this.addRestToXml(measure, dur);

            } else if (symbol.kind === "clef") {
                this.setClef(symbol.sign || "G", symbol.line || 2);

            } else if (symbol.kind === "time") {
                this.setTimeSignature(symbol.beats || 4, symbol.beatType || 4);

            } else if (symbol.kind === "key") {
                this.setKeySignature(symbol.fifths || 0);

            } else if (symbol.kind === "dynamic") {
            this.addDynamic(symbol.text || "mf");

            } else if (symbol.kind === "erase") {
                // borrar SIEMPRE la última nota del compás
                this.deleteLastNoteInMeasure(measure);
            }

        },

        addNoteToXml(measure, step, octave, type) {
            const note = this.xmlDoc.createElement("note");

            const pitch = this.xmlDoc.createElement("pitch");
            const stepEl = this.xmlDoc.createElement("step");
            stepEl.textContent = step;
            const octaveEl = this.xmlDoc.createElement("octave");
            octaveEl.textContent = octave;
            pitch.appendChild(stepEl);
            pitch.appendChild(octaveEl);
            note.appendChild(pitch);

            const durMap = { whole: 16, half: 8, quarter: 4, eighth: 2 };
            const duration = this.xmlDoc.createElement("duration");
            duration.textContent = durMap[type] || 4;
            note.appendChild(duration);

            const voice = this.xmlDoc.createElement("voice");
            voice.textContent = "1";
            note.appendChild(voice);

            const typeEl = this.xmlDoc.createElement("type");
            typeEl.textContent = type;
            note.appendChild(typeEl);

            measure.appendChild(note);
        },

        deleteNoteAt(measure, step, octave) {
            const notes = measure.getElementsByTagName("note");
            let toRemove = null;

            // buscamos de atrás para adelante (borra la última nota con ese tono)
            for (let i = notes.length - 1; i >= 0; i--) {
                const n = notes[i];
                const pitch = n.querySelector("pitch");
                if (!pitch) continue;

                const s = pitch.querySelector("step")?.textContent;
                const o = pitch.querySelector("octave")?.textContent;

                if (s === step && o === String(octave)) {
                    toRemove = n;
                    break;
                }
            }

    if (toRemove) {
        measure.removeChild(toRemove);
    }
},
        deleteLastNoteInMeasure(measure) {
            const notes = measure.getElementsByTagName("note");
            if (!notes.length) return;

            // última nota del compás
            const last = notes[notes.length - 1];
            measure.removeChild(last);
        },



        addRestToXml(measure, type) {
            const note = this.xmlDoc.createElement("note");

            const rest = this.xmlDoc.createElement("rest");
            note.appendChild(rest);

            const durMap = { whole: 16, half: 8, quarter: 4, eighth: 2 };
            const duration = this.xmlDoc.createElement("duration");
            duration.textContent = durMap[type] || 4;
            note.appendChild(duration);

            const voice = this.xmlDoc.createElement("voice");
            voice.textContent = "1";
            note.appendChild(voice);

            const typeEl = this.xmlDoc.createElement("type");
            typeEl.textContent = type;
            note.appendChild(typeEl);

            measure.appendChild(note);
        },

        setClef(sign, line) {
            let clef = this.xmlDoc.querySelector("clef");
            if (!clef) {
                const attributes = this.xmlDoc.querySelector("attributes") || this.xmlDoc.querySelector("measure").appendChild(this.xmlDoc.createElement("attributes"));
                clef = this.xmlDoc.createElement("clef");
                attributes.appendChild(clef);
            }
            let signEl = clef.querySelector("sign");
            if (!signEl) { signEl = this.xmlDoc.createElement("sign"); clef.appendChild(signEl); }
            signEl.textContent = sign;

            let lineEl = clef.querySelector("line");
            if (!lineEl) { lineEl = this.xmlDoc.createElement("line"); clef.appendChild(lineEl); }
            lineEl.textContent = line;
        },

        setTimeSignature(beats, beatType) {
            let time = this.xmlDoc.querySelector("time");
            if (!time) {
                const attributes = this.xmlDoc.querySelector("attributes") || this.xmlDoc.querySelector("measure").appendChild(this.xmlDoc.createElement("attributes"));
                time = this.xmlDoc.createElement("time");
                attributes.appendChild(time);
            }
            let beatsEl = time.querySelector("beats");
            if (!beatsEl) { beatsEl = this.xmlDoc.createElement("beats"); time.appendChild(beatsEl); }
            beatsEl.textContent = beats;

            let beatTypeEl = time.querySelector("beat-type");
            if (!beatTypeEl) { beatTypeEl = this.xmlDoc.createElement("beat-type"); time.appendChild(beatTypeEl); }
            beatTypeEl.textContent = beatType;
        },

        setKeySignature(fifths) {
            let key = this.xmlDoc.querySelector("key");
            if (!key) {
                const attributes = this.xmlDoc.querySelector("attributes") || this.xmlDoc.querySelector("measure").appendChild(this.xmlDoc.createElement("attributes"));
                key = this.xmlDoc.createElement("key");
                attributes.appendChild(key);
            }
            let fifthsEl = key.querySelector("fifths");
            if (!fifthsEl) { fifthsEl = this.xmlDoc.createElement("fifths"); key.appendChild(fifthsEl); }
            fifthsEl.textContent = fifths;
        },

        addDynamic(text) {
            const measure = this.xmlDoc.querySelector("measure");
            const direction = this.xmlDoc.createElement("direction");
            const dirType = this.xmlDoc.createElement("direction-type");
            const dynamics = this.xmlDoc.createElement("dynamics");
            const dynEl = this.xmlDoc.createElement(text);

            dynamics.appendChild(dynEl);
            dirType.appendChild(dynamics);
            direction.appendChild(dirType);
            measure.appendChild(direction);
        },

        async saveCanvas() {
            if (!this.xmlDoc) return;

            const xml = new XMLSerializer().serializeToString(this.xmlDoc);

            const svg = document.querySelector("#staffCanvas svg");
            if (!svg) {
                alert("No hay nada para guardar todavía.");
                return;
            }

            const serializer = new XMLSerializer();
            const svgString = serializer.serializeToString(svg);

            const canvas = document.createElement("canvas");
            const ctx = canvas.getContext("2d");
            const img = new Image();
            img.src = URL.createObjectURL(new Blob([svgString], { type: "image/svg+xml" }));

            img.onload = async () => {
                // Pasar SVG a PNG
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                const png = canvas.toDataURL("image/png");

                // MISMO sistema de usuario que en library.html
                let usuario = "";
                try {
                    const r = await fetch("/api/session", { credentials: "include" });
                    if (r.ok) {
                        const d = await r.json();
                        if (d.logged_in) {
                            usuario = d.email;   // igual que requireSessionOrRedirect()
                        }
                    }
                } catch (err) {
                    console.error(err);
                }

                if (!usuario) {
                    alert("Tenés que iniciar sesión para guardar la partitura.");
                    return;
                }

                // Pedir nombre
                let nombre = prompt("Nombre de la partitura:");
                if (!nombre) return;
                nombre = nombre.trim();
                if (!nombre) return;

                // Opcional: mismo formato que la librería (sin espacios)
                nombre = nombre.replace(/\s+/g, "_");

                // Guardar en el backend
                const res = await fetch("/api/editor/save", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ usuario, nombre, xml, png })
                });

                try {
                    const out = await res.json();
                    if (!out.success) {
                        alert("Error al guardar: " + (out.error || "desconocido"));
                        return;
                    }
                } catch {
                    // si el backend no devuelve JSON, por lo menos seguimos
                }

                // Ir a la biblioteca
                window.location.href = "library.html";
            };
        }
            };
        }
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</body>
</html>
